form(class="{{cssClass}}" autocomplete="off")
  header.sheet-header
    .header-row
      .col1
        .game-title
          | DEATH IN SPACE
        .sheet-title
          | PERSONAL DATA SHEET
      .col2
        div 
          | SECTION 0. PLAYER INFORMATION 
        .player-name
          input(class="player-name" name="data.playerName" type="text" value="{{data.data.playerName}}" placeholder="{{ localize 'DIS.PlayerName' }}" spellcheck="false")

  nav(class="sheet-tabs tabs" data-group="primary")
    a(class="item" data-tab="personal")
      | {{ localize 'DIS.TabPersonal' }}
    a(class="item" data-tab="situation")
      | {{ localize 'DIS.TabSituation' }}
    a(class="item" data-tab="belongings")
      | {{ localize 'DIS.TabBelongings' }}
    a(class="item" data-tab="weaponry")
      | {{ localize 'DIS.TabWeaponry' }}
    a(class="item" data-tab="notes")
      | {{ localize 'DIS.TabNotes' }}
  
  section.sheet-body 

    div(class="tab personal-tab" data-group="primary" data-tab="personal")
      .personal-wrapper 
        .origin-row 
          .origin-label ORIGIN 
          .origin 
        .name-row 
          .stat-block
            label NAME
            input(type="text" name="name" value="{{actor.name}}" placeholder="{{ localize 'DIS.Name' }}" spellcheck="false")
          .stat-block
            label NICKNAME
            input(type="text" name="data.nickName" value="{{data.data.nickName}}" placeholder="{{ localize 'DIS.NickName' }}" spellcheck="false")
        .stat-block.origin-benefit-block
          label ORIGIN BENEFITS
        .stat-block.xp-block
          label XP
          input(type="number" class="stat-input" name="data.xp.value" value="{{data.data.xp.value}}" data-dtype="Number")
        .stat-block.background-block
          label BACKGROUND
          input(type="text" class="stat-input" name="data.background" value="{{data.data.background}}" data-dtype="String")
        .stat-block.past-allegiance-block
          label PAST ALLEGIANCE
          input(type="text" class="stat-input" name="data.pastAllegiance" value="{{data.data.pastAllegiance}}" data-dtype="String")
        .stat-block.trait-block
          label TRAITS
          input(type="text" class="stat-input" name="data.trait" value="{{data.data.trait}}" data-dtype="String")
        .stat-block.drive-block
          label DRIVE
          input(type="text" class="stat-input" name="data.drive" value="{{data.data.drive}}" data-dtype="String")
        .stat-block.looks-block
          label LOOKS
          textarea(name="data.looks", rows="4") 
            | {{data.data.looks}}
        .stat-block.ability-block
          label ABILITY
          br
          .ability-col 
            each val in ["BODY", "DEXTERITY", "SAVVY", "TECH"]
              .ability-row 
                .ability-name=val
                .ability-value 
                  input(type="number" class="stat-input" name="data.abilities." + val + ".value" value="{{data.data.abilities." + val + ".value}}" data-dtype="Number")
        .defense-row 
          .defense-text 
            label DEFENSE RATING
            br
            | 12+DEX Unarmored
          .defense-value 
            label &nbsp;
            br
            input(type="number" class="stat-input" name="data.defenseRating" value="{{data.data.defenseRating}}" data-dtype="Number")
        .hit-points-row 
          .hit-points-text 
            label HIT POINTS
            br
            | Start with 1d8
            br
            | Recover 1d4+BODY
          .hit-points-current-col 
            label CURRENT
            br
            input(type="number" class="stat-input" name="data.hitPoints.value" value="{{data.data.hitPoints.value}}" data-dtype="Number")
          .hit-points-max-col 
            label MAX
            br
            input(type="number" class="stat-input" name="data.hitPoints.max" value="{{data.data.hitPoints.max}}" data-dtype="Number")
        .stat-block.portrait-block 
          label PORTRAIT
          br
          .portrait-col 
            .portrait 
              img(class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}")

    div(class="tab situation-tab" data-group="primary" data-tab="situation")
      .situation-wrapper 
        .void-points-block
          .void-col-1 
            .stat-block 
              label 
                | VOID POINTS 
            .void-points-radios 
              ul.void-points
                each val in [0, 1, 2, 3, 4] 
                  li 
                    label
                      //- deal with Pug checked= not working right with Foundry state
                      | <input type="radio" name="data.voidPoints.value" value=#{val} data-dtype="Number" {{#ifEq data.data.voidPoints.value #{val}}}checked{{/ifEq}}/>
                      span= val
          .void-col-2 
            .void-points-text-top 
              | VOID POINTS CAN BE USED TO: 
            .void-points-text-bottom 
              ul 
                li Get advantage on an ability check or attack roll.
                li Activate a cosmic mutation.
        .cosmic-mutations-block
          .stat-block.mutations-title 
            label COSMIC MUTATIONS 
        .void-corruption-block 
          .stat-block.corruption-title 
            label VOID CORRUPTION 
        .life-support-block
          .stat-block.life-support-title 
            label LIFE SUPPORT 
          .tank-space 
          .oxygen-tank-row 
            .oxygen-numbers 
              div 
                | 0%
              div 
                | 100%
            .oxygen-tank
              .oxygen-increments
                each val in [1, 2, 3, 4, 5, 6, 7]
                  .increment 
                    //- deal with pug checked= not working right with Foundry state
                    | <input type="radio" name="data.lifeSupport.value" value=#{val} data-dtype="Number" {{#ifEq data.data.lifeSupport.value #{val}}}checked{{/ifEq}}/>
          .tank-space

    div(class="tab belongings-tab" data-group="primary" data-tab="belongings")
      .belongings-wrapper 
        .holo-row 
          .stat-block.holos 
            label HOLOS
            input(type="number" class="stat-input" name="data.holos" value="{{data.data.holos}}" data-dtype="Number")
          .stat-block.debt 
            label DEBT
            input(type="number" class="stat-input" name="data.debt" value="{{data.data.debt}}" data-dtype="Number")
        .belongings 
          | {{#each data.data.equipment as |item id|}}
          .belonging
            | {{item.name}}
          | {{/each}}


    div(class="tab weaponry-tab" data-group="primary" data-tab="weaponry")
      .weaponry-wrapper 
        table.weapons 
          thead 
            th.name 
              | WEAPON 
            th.damage 
              | DAMAGE 
            th.units 
              | UNITS 
            th.condition 
              | CONDITION 
          tbody 
            tr
              td.name 
                | &nbsp;
              td.damage 
                | &nbsp;
              td.units 
                | &nbsp;
              td.condition 
                | &nbsp;
        table.armor 
          thead 
            th.name 
              | ARMOR TYPE
            th.protects-against 
              | PROTECTS AGAINST 
            th.dr-bonus 
              | DR BONUS 
            th.condition 
              | CONDITION 
          tbody 
            tr
              td.name 
                | &nbsp;
              td.protects-against 
                | &nbsp;
              td.dr-bonus 
                | &nbsp;
              td.condition 
                | &nbsp;

    div(class="tab notes-tab" data-group="primary" data-tab="notes")
      .notes-wrapper 
        | {{editor content=data.data.notes target="data.notes" button=true owner=owner editable=true}}